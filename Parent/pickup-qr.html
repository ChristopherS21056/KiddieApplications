<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kiddie - QR Pickup</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; }
        
        /* CSS untuk menghilangkan garis scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Animasi Scan dihapus agar tidak ada garis biru */
    </style>
</head>
<body class="bg-gray-200 flex justify-center items-center min-h-screen m-0">

    <div class="w-full max-w-md h-[100dvh] bg-white shadow-2xl relative overflow-hidden flex flex-col">

        <div class="px-6 pt-8 pb-4 bg-white sticky top-0 z-30 flex justify-between items-center shadow-sm">
            <a href="./dashboardParent.html" class="p-2 -ml-2 rounded-full hover:bg-gray-50 text-gray-600 transition">
                <i data-lucide="chevron-left" class="w-6 h-6"></i>
            </a>
            <h1 class="text-lg font-bold text-gray-800">Pick-up QR</h1>
            <div class="w-8"></div>
        </div>

        <div class="flex-1 overflow-y-auto no-scrollbar relative w-full pb-32 px-6 pt-4">
            
            <div class="text-center mb-6">
                <p class="text-xs text-gray-400 font-medium tracking-wide uppercase">Security Checkpoint</p>
            </div>

            <div class="bg-gradient-to-b from-cyan-400 to-cyan-600 rounded-[2.5rem] p-8 shadow-xl relative overflow-hidden text-center text-white mb-6">
                <div class="absolute top-0 left-0 w-32 h-32 bg-white/10 rounded-full blur-2xl -translate-x-10 -translate-y-10"></div>
                <div class="absolute bottom-0 right-0 w-32 h-32 bg-white/10 rounded-full blur-2xl translate-x-10 translate-y-10"></div>
                
                <h2 class="font-bold text-lg mb-1">Scan to pick-up</h2>
                <p class="text-cyan-100 text-xs mb-6">Valid for one-time use only</p>
                
                <div class="bg-white p-4 rounded-3xl inline-block shadow-lg relative overflow-hidden group">
                    <img id="qr-image" src="" alt="QR Code" class="w-48 h-48 object-contain rounded-xl">
                    
                    <div id="expired-overlay" class="absolute inset-0 bg-white/90 backdrop-blur-sm flex flex-col items-center justify-center hidden">
                        <i data-lucide="refresh-cw" class="w-10 h-10 text-gray-400 mb-2"></i>
                        <span class="text-gray-500 font-bold text-sm">Expired</span>
                        <button onclick="generateNewQR()" class="mt-2 text-xs text-cyan-500 font-bold underline">Tap to Refresh</button>
                    </div>
                </div>

                <div class="mt-6">
                    <h3 class="text-2xl font-bold">Vassel Goleyu</h3>
                    <p class="text-cyan-100 text-sm opacity-90">Class B1 â€¢ ID: 20250012</p>
                </div>
                
                <div class="mt-6 bg-black/20 rounded-full py-2 px-4 inline-flex items-center gap-2 backdrop-blur-md border border-white/10">
                    <i data-lucide="timer" class="w-4 h-4 text-yellow-300"></i>
                    <span id="countdown" class="text-sm font-mono font-bold text-yellow-300">05:00</span>
                </div>
            </div>

            <div class="bg-gray-50 rounded-3xl p-6 border border-gray-100 mb-6">
                <h3 class="font-bold text-gray-700 text-sm mb-3 flex items-center gap-2">
                    <i data-lucide="info" class="w-4 h-4 text-cyan-500"></i>
                    Pick-up instruction
                </h3>
                <ul class="text-xs text-gray-500 space-y-2.5 list-disc pl-4 leading-relaxed">
                    <li>Show this QR code to the security guard</li>
                    <li>Wait at the designated pick-up area</li>
                    <li>Your child will be called to come out</li>
                    <li>Sign the pick-up log before leaving</li>
                </ul>
            </div>

            <button onclick="generateNewQR()" class="w-full py-4 text-gray-400 text-sm font-medium hover:text-cyan-500 transition flex items-center justify-center gap-2 mb-4">
                <i data-lucide="refresh-ccw" class="w-4 h-4"></i> Generate New Code
            </button>
        </div>

        <div class="absolute bottom-0 left-0 right-0 bg-white border-t border-gray-50 px-6 py-2 pb-6 flex justify-between items-end z-50 rounded-t-[2.5rem] shadow-[0_-10px_40px_rgba(0,0,0,0.05)]">
            
            <a href="./dashboardParent.html" class="flex flex-col items-center gap-1.5 p-2 w-16 text-gray-400 hover:text-cyan-500 transition">
                <i data-lucide="home" class="w-6 h-6"></i>
                <span class="text-[11px] font-medium">Home</span>
            </a>
            
            <a href="./dev-tree.html" class="flex flex-col items-center gap-1.5 p-2 w-16 text-gray-400 hover:text-cyan-500 transition">
                <i data-lucide="sprout" class="w-6 h-6"></i>
                <span class="text-[11px] font-medium">Dev Tree</span>
            </a>
            
            <div class="-mt-12 relative z-50">
                <button class="bg-cyan-500 w-16 h-16 rounded-full shadow-2xl shadow-cyan-200 text-white flex items-center justify-center border-[6px] border-white animate-pulse">
                    <i data-lucide="scan-line" class="w-7 h-7"></i>
                </button>
            </div>

            <a href="./schedule.html" class="flex flex-col items-center gap-1.5 p-2 w-16 text-gray-400 hover:text-cyan-500 transition">
                <i data-lucide="calendar-days" class="w-6 h-6"></i>
                <span class="text-[11px] font-medium">Schedule</span>
            </a>
            
            <a href="./profile.html" class="flex flex-col items-center gap-1.5 p-2 w-16 text-gray-400 hover:text-cyan-500 transition">
                <i data-lucide="user" class="w-6 h-6"></i>
                <span class="text-[11px] font-medium">Profile</span>
            </a>
        </div>

    </div>

    <script>
        lucide.createIcons();
        const qrImage = document.getElementById('qr-image');
        const countdownEl = document.getElementById('countdown');
        const expiredOverlay = document.getElementById('expired-overlay');
        let timerInterval;

        function generateNewQR() {
            expiredOverlay.classList.add('hidden');
            const randomToken = "PICKUP-" + Math.floor(Math.random() * 1000000) + "-" + Date.now();
            qrImage.src = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${randomToken}&color=000000&bgcolor=ffffff`;
            startTimer(300);
        }

        function startTimer(duration) {
            clearInterval(timerInterval);
            let timer = duration, minutes, seconds;
            timerInterval = setInterval(function () {
                minutes = parseInt(timer / 60, 10);
                seconds = parseInt(timer % 60, 10);

                minutes = minutes < 10 ? "0" + minutes : minutes;
                seconds = seconds < 10 ? "0" + seconds : seconds;

                countdownEl.textContent = minutes + ":" + seconds;

                if (--timer < 0) {
                    clearInterval(timerInterval);
                    countdownEl.textContent = "00:00";
                    expireQR();
                }
            }, 1000);
        }

        function expireQR() {
            expiredOverlay.classList.remove('hidden');
        }

        window.onload = generateNewQR;
    </script>
</body>
</html>