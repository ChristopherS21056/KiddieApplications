<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kiddie - Schedule & Activity Gallery</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; }
        
        /* Hide Scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        .animate-fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .schedule-card { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .schedule-card:hover { transform: translateX(8px); }
        .schedule-card:active { transform: scale(0.98); }
        
        /* Timeline Styles */
        .timeline-container { display: grid; grid-template-columns: auto 1fr; gap: 0; position: relative; }
        .timeline-line { display: none; } 
        
        /* Date Tab Styles */
        .day-tab { 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            scroll-snap-align: center; 
            flex-shrink: 0;
        }
        .day-tab.active { 
            background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); 
            transform: scale(1.05);
            box-shadow: 0 10px 15px -3px rgba(6, 182, 212, 0.3);
        }
        
        #dateSlider {
            scroll-behavior: smooth;
            scroll-snap-type: x mandatory;
            padding-left: 50%; 
            padding-right: 50%;
        }

        /* Animations */
        @keyframes bounce-short {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-25%); }
        }
        .animate-bounce-short { animation: bounce-short 1s infinite; }

        @keyframes zoomIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        .animate-zoom-in { animation: zoomIn 0.3s ease-out; }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-50 to-gray-100">

    <div class="w-full max-w-md mx-auto min-h-screen bg-white shadow-2xl relative flex flex-col">

        <div class="px-5 pt-6 pb-4 bg-gradient-to-r from-cyan-500 via-blue-500 to-blue-600 relative overflow-hidden z-10 shadow-md">
            <div class="absolute inset-0 opacity-10">
                <div class="absolute top-0 left-0 w-32 h-32 bg-white rounded-full -translate-x-16 -translate-y-16"></div>
                <div class="absolute bottom-0 right-0 w-40 h-40 bg-white rounded-full translate-x-20 translate-y-20"></div>
            </div>
            
            <div class="relative z-10">
                <div class="flex justify-between items-center mb-4">
                    <button onclick="goBack()" class="p-2 rounded-xl hover:bg-white/20 text-white transition active:scale-95">
                        <i data-lucide="chevron-left" class="w-6 h-6"></i>
                    </button>
                    <div class="flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full">
                        <i data-lucide="calendar-range" class="w-4 h-4 text-white"></i>
                        <h1 class="text-base font-bold text-white">Jadwal Bulanan</h1>
                    </div>
                    
                    <div class="flex gap-2 items-center">
                        <button onclick="toggleNotifications()" class="relative p-2 rounded-xl hover:bg-white/20 transition active:scale-95 group">
                            <i data-lucide="bell" class="w-6 h-6 text-white group-hover:scale-110 transition-transform"></i>
                            <span id="notifBadge" class="hidden absolute top-1.5 right-2 w-3 h-3 bg-red-500 rounded-full border-2 border-blue-500 flex items-center justify-center animate-bounce-short"></span>
                        </button>
                    </div>
                </div>

                <div class="flex items-center justify-center gap-3 bg-white/95 backdrop-blur-sm rounded-2xl px-4 py-3 shadow-lg">
                    <button onclick="changeMonth(-1)" class="text-gray-600 hover:bg-gray-100 p-2 rounded-xl transition active:scale-95">
                        <i data-lucide="chevron-left" class="w-5 h-5"></i>
                    </button>
                    <div class="flex items-center gap-2 min-w-[140px] justify-center">
                        <i data-lucide="calendar" class="w-4 h-4 text-cyan-500"></i>
                        <span id="currentMonth" class="font-bold text-gray-800">Desember 2025</span>
                    </div>
                    <button onclick="changeMonth(1)" class="text-gray-600 hover:bg-gray-100 p-2 rounded-xl transition active:scale-95">
                        <i data-lucide="chevron-right" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
        </div>

        <div class="bg-white border-b border-gray-100 sticky top-0 z-20 shadow-sm">
            <div class="flex overflow-x-auto no-scrollbar gap-3 px-4 py-4" id="dateSlider">
                </div>
        </div>

        <div class="flex-1 overflow-hidden px-5 py-4 pb-24">
            
            <div class="mb-4">
                <div class="flex items-center gap-2">
                    <h2 class="font-bold text-gray-800 text-lg" id="selectedDayTitle">Jadwal Selasa</h2>
                    <span id="holidayBadge" class="hidden px-2 py-0.5 bg-red-100 text-red-600 text-[10px] font-bold rounded-full border border-red-200">LIBUR NASIONAL</span>
                </div>
                <p class="text-sm text-gray-500" id="selectedDayDate">9 Desember 2025</p>
                <p class="text-xs text-red-500 font-medium mt-1 hidden" id="holidayName"></p>
                <p class="text-xs text-cyan-600 mt-2 flex items-center gap-1">
                    <i data-lucide="info" class="w-3 h-3"></i> Tap pada jadwal untuk melihat foto kegiatan
                </p>
            </div>

            <div id="scheduleContainer" class="timeline-container">
                </div>

            <div id="emptyState" class="hidden flex flex-col items-center justify-center py-12 text-center animate-fade-in">
                <div class="w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-200 rounded-3xl flex items-center justify-center mb-4 shadow-inner">
                    <i data-lucide="calendar-off" class="w-10 h-10 text-gray-400"></i>
                </div>
                <h3 class="font-bold text-gray-800 mb-1" id="emptyTitle">Tidak Ada Jadwal</h3>
                <p class="text-xs text-gray-500 max-w-xs" id="emptyDesc">Nikmati waktu istirahatmu!</p>
            </div>
        </div>

        <div class="absolute bottom-0 left-0 right-0 bg-white/95 backdrop-blur-xl border-t border-gray-100 px-4 py-3 pb-5 flex justify-around items-center z-50 rounded-t-3xl shadow-[0_-10px_30px_rgba(0,0,0,0.1)]">
            <a href="./dashboardParent.html" class="flex flex-col items-center gap-1 p-2 text-gray-400 hover:text-cyan-500 transition-all group active:scale-95">
                <i data-lucide="home" class="w-6 h-6 group-hover:scale-110 transition-transform"></i>
                <span class="text-[10px] font-medium">Home</span>
            </a>
            <a href="./dev-tree.html" class="flex flex-col items-center gap-1 p-2 text-gray-400 hover:text-cyan-500 transition-all group active:scale-95">
                <i data-lucide="sprout" class="w-6 h-6 group-hover:scale-110 transition-transform"></i>
                <span class="text-[10px] font-medium">Dev Tree</span>
            </a>
            <div class="-mt-12">
                <a href="./pickup-qr.html" class="flex items-center justify-center bg-gradient-to-br from-cyan-500 to-blue-600 w-16 h-16 rounded-full shadow-2xl shadow-cyan-500/50 text-white border-4 border-white hover:scale-105 transition-transform active:scale-95">
                    <i data-lucide="scan-line" class="w-7 h-7"></i>
                </a>
            </div>
            <button class="flex flex-col items-center gap-1 p-2 text-cyan-500 scale-105">
                <i data-lucide="calendar-days" class="w-6 h-6"></i>
                <span class="text-[10px] font-bold">Jadwal</span>
            </button>
            <a href="./profile.html" class="flex flex-col items-center gap-1 p-2 text-gray-400 hover:text-cyan-500 transition-all group active:scale-95">
                <i data-lucide="user" class="w-6 h-6 group-hover:scale-110 transition-transform"></i>
                <span class="text-[10px] font-medium">Profil</span>
            </a>
        </div>
    </div>

    <div id="notificationPanel" class="hidden fixed inset-0 z-50 flex items-start justify-center pt-20 px-4" style="background: rgba(0,0,0,0.3); backdrop-filter: blur(4px);">
        <div class="absolute inset-0" onclick="toggleNotifications()"></div>
        <div class="bg-white w-full max-w-sm rounded-3xl shadow-2xl overflow-hidden relative z-10 animate-fade-in flex flex-col max-h-[70vh]">
            <div class="p-4 border-b border-gray-100 flex justify-between items-center bg-gradient-to-r from-gray-50 to-white">
                <h3 class="font-bold text-gray-800 flex items-center gap-2">
                    <i data-lucide="bell-ring" class="w-4 h-4 text-cyan-500"></i> Notifikasi
                    <span id="notifCountLabel" class="text-xs bg-cyan-100 text-cyan-600 px-2 py-0.5 rounded-full hidden">0</span>
                </h3>
                <div class="flex gap-2">
                    <button onclick="markAllRead()" class="text-[10px] font-semibold text-blue-500 hover:bg-blue-50 px-2 py-1 rounded-lg transition">Baca Semua</button>
                    <button onclick="toggleNotifications()" class="p-1 hover:bg-gray-100 rounded-full text-gray-400"><i data-lucide="x" class="w-4 h-4"></i></button>
                </div>
            </div>
            <div id="notificationList" class="overflow-y-auto p-2 space-y-2 flex-1 bg-gray-50/50"></div>
            <div class="p-3 border-t border-gray-100 bg-white text-center">
                <button onclick="clearAllNotifications()" class="text-xs text-red-400 hover:text-red-600 font-medium w-full py-1">Hapus Semua Notifikasi</button>
            </div>
        </div>
    </div>

    <div id="photoModal" class="hidden fixed inset-0 z-[60] flex items-center justify-center p-4" style="background: rgba(0,0,0,0.8); backdrop-filter: blur(5px);">
        <div class="absolute inset-0" onclick="closePhotoModal()"></div>

        <div class="bg-white w-full max-w-sm rounded-3xl overflow-hidden relative z-10 animate-zoom-in shadow-2xl">
            <div class="p-4 flex justify-between items-center absolute top-0 left-0 right-0 bg-gradient-to-b from-black/60 to-transparent text-white">
                <div>
                    <h3 id="photoModalTitle" class="font-bold text-lg leading-tight">Mathematics</h3>
                    <p id="photoModalTime" class="text-xs opacity-90">09:00 AM</p>
                </div>
                <button onclick="closePhotoModal()" class="bg-white/20 backdrop-blur-md p-2 rounded-full hover:bg-white/40 transition">
                    <i data-lucide="x" class="w-5 h-5 text-white"></i>
                </button>
            </div>

            <div class="aspect-[4/3] bg-gray-100 relative">
                <img id="photoModalImg" src="" alt="Activity" class="w-full h-full object-cover">
            </div>

            <div class="p-5 bg-white">
                <div class="flex items-start gap-3 mb-3">
                    <div class="w-10 h-10 rounded-full bg-gray-100 overflow-hidden shrink-0 border-2 border-white shadow-sm">
                        <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Teacher" alt="Teacher" class="w-full h-full object-cover">
                    </div>
                    <div>
                        <p class="text-xs text-gray-500 font-medium uppercase tracking-wide">Guru Pengajar</p>
                        <p id="photoModalTeacher" class="font-bold text-gray-800 text-sm">Ms. Sarah</p>
                    </div>
                </div>
                <p class="text-sm text-gray-600 leading-relaxed bg-gray-50 p-3 rounded-xl border border-gray-100">
                    "Hari ini anak-anak belajar berhitung menggunakan alat peraga buah-buahan. Sangat antusias!"
                </p>
                
                <button class="w-full mt-4 py-3 bg-cyan-500 hover:bg-cyan-600 text-white rounded-xl font-semibold text-sm transition shadow-lg shadow-cyan-500/30 active:scale-95 flex items-center justify-center gap-2">
                    <i data-lucide="download" class="w-4 h-4"></i> Simpan Foto
                </button>
            </div>
        </div>
    </div>

    <script>
        // ==========================================
        // 1. DATA CONFIGURATION
        // ==========================================
        const nationalHolidays = {
            '25-12-2025': 'Hari Raya Natal',
            '26-12-2025': 'Cuti Bersama Natal',
            '1-1-2026': 'Tahun Baru Masehi'
        };

        // Note: Saya menambahkan properti 'image' pada data jadwal
        // Gunakan link gambar placeholder atau foto asli anak nantinya
        const scheduleData = {
            Monday: [
                { time: '08:30', title: 'English', room: 'Room 12', teacher: 'Ms. Emily', icon: 'book-open', color: 'indigo', image: 'https://images.unsplash.com/photo-1503676260728-1c00da094a0b?q=80&w=800&auto=format&fit=crop' },
                { time: '10:00', title: 'Snack Time', icon: 'coffee', color: 'amber', image: 'https://images.unsplash.com/photo-1498837167922-ddd27525d352?q=80&w=800&auto=format&fit=crop' },
                { time: '11:00', title: 'Science', room: 'Lab 1', teacher: 'Mr. David', icon: 'flask-conical', color: 'green', image: 'https://images.unsplash.com/photo-1532094349884-543bc11b234d?q=80&w=800&auto=format&fit=crop' },
                { time: '12:30', title: 'Lunch Time', icon: 'utensils', color: 'orange', image: null }, // Contoh tanpa foto
                { time: '14:00', title: 'Nap Time', icon: 'moon', color: 'blue', image: null }
            ],
            Tuesday: [
                { time: '09:00', title: 'Mathematics', room: 'Room 14', teacher: 'Ms. Sarah', icon: 'calculator', color: 'purple', image: 'https://images.unsplash.com/photo-1596495578065-6e0763fa1178?q=80&w=800&auto=format&fit=crop' },
                { time: '10:00', title: 'Snack Time', icon: 'coffee', color: 'amber', image: null },
                { time: '10:30', title: 'Art & Craft', room: 'Art Studio', teacher: 'Mr. John', icon: 'palette', color: 'pink', image: 'https://images.unsplash.com/photo-1513364776144-60967b0f800f?q=80&w=800&auto=format&fit=crop' },
                { time: '12:30', title: 'Lunch Time', icon: 'utensils', color: 'orange', image: null }
            ],
            Wednesday: [
                { time: '08:30', title: 'Music', room: 'Music Room', teacher: 'Ms. Lisa', icon: 'music', color: 'yellow', image: 'https://images.unsplash.com/photo-1507838153414-b4b713384ebd?q=80&w=800&auto=format&fit=crop' },
                { time: '11:00', title: 'Physical Education', room: 'Playground', teacher: 'Coach Mike', icon: 'dumbbell', color: 'red', image: 'https://images.unsplash.com/photo-1562771242-a02d9090c90c?q=80&w=800&auto=format&fit=crop' },
                { time: '12:30', title: 'Lunch Time', icon: 'utensils', color: 'orange', image: null }
            ],
            Thursday: [
                { time: '09:00', title: 'Language', room: 'Room 8', teacher: 'Ms. Anna', icon: 'languages', color: 'violet', image: 'https://images.unsplash.com/photo-1546410531-bb4caa6b424d?q=80&w=800&auto=format&fit=crop' },
                { time: '11:00', title: 'Story Time', room: 'Library', teacher: 'Ms. Rachel', icon: 'book-open-text', color: 'sky', image: 'https://images.unsplash.com/photo-1512820790803-83ca734da794?q=80&w=800&auto=format&fit=crop' }
            ],
            Friday: [
                { time: '09:00', title: 'Computer Class', room: 'Lab 2', teacher: 'Mr. Tom', icon: 'laptop', color: 'cyan', image: 'https://images.unsplash.com/photo-1531482615713-2afd69097998?q=80&w=800&auto=format&fit=crop' },
                { time: '11:00', title: 'Show & Tell', room: 'Main Hall', teacher: 'Various', icon: 'presentation', color: 'rose', image: 'https://images.unsplash.com/photo-1566008552396-85614eb79805?q=80&w=800&auto=format&fit=crop' }
            ],
            Saturday: [], 
            Sunday: []
        };

        let notifications = [
            { id: 1, title: "Jadwal Berubah", message: "Kelas Musik dipindahkan ke jam 13:00.", time: "Baru saja", type: "alert", read: false },
            { id: 2, title: "Pembayaran SPP", message: "Pembayaran bulan Desember diterima.", time: "1 jam lalu", type: "success", read: false },
            { id: 3, title: "PR Matematika", message: "Jangan lupa buku paket besok.", time: "Kemarin", type: "info", read: true }
        ];

        let currYear = 2025;
        let currMonth = 11; 
        let selectedDate = 9;

        function init() {
            renderMonthInfo();
            renderDateSlider();
            renderNotifications();
            lucide.createIcons();
        }

        // ==========================================
        // 2. SCHEDULE LOGIC
        // ==========================================
        function renderMonthInfo() {
            const months = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];
            document.getElementById('currentMonth').textContent = `${months[currMonth]} ${currYear}`;
        }

        function renderDateSlider() {
            const container = document.getElementById('dateSlider');
            container.innerHTML = ''; 

            const daysInMonth = new Date(currYear, currMonth + 1, 0).getDate();
            const dayNames = ['Min', 'Sen', 'Sel', 'Rab', 'Kam', 'Jum', 'Sab'];
            const dayNamesFull = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];

            for (let i = 1; i <= daysInMonth; i++) {
                const dateObj = new Date(currYear, currMonth, i);
                const dayIndex = dateObj.getDay(); 
                
                const dateKey = `${i}-${currMonth + 1}-${currYear}`;
                const isNationalHoliday = nationalHolidays[dateKey] ? true : false;
                const isSunday = dayIndex === 0;
                const isRedDate = isSunday || isNationalHoliday;
                const isSelected = (i === selectedDate);

                const btn = document.createElement('button');
                let baseClasses = "day-tab flex flex-col items-center gap-1.5 px-4 py-3 rounded-2xl min-w-[68px] border border-transparent";
                let colorClasses = "";

                if (isSelected) {
                    colorClasses = "active text-white shadow-lg shadow-cyan-500/30";
                    btn.id = "activeDay"; 
                } else {
                    if (isRedDate) {
                        colorClasses = "bg-white text-red-500 border-red-100 hover:bg-red-50";
                    } else {
                        colorClasses = "bg-white text-gray-500 border-gray-100 hover:bg-gray-50";
                    }
                }

                btn.className = `${baseClasses} ${colorClasses}`;
                
                btn.innerHTML = `
                    <span class="text-[10px] font-semibold uppercase tracking-wider">${dayNames[dayIndex]}</span>
                    <span class="text-xl font-bold">${i}</span>
                    ${isSelected ? '<div class="w-1.5 h-1.5 rounded-full bg-white mt-0.5"></div>' : 
                      (scheduleData[dayNamesFull[dayIndex]]?.length > 0 && !isNationalHoliday ? '<div class="w-1.5 h-1.5 rounded-full bg-cyan-400 mt-0.5"></div>' : '<div class="h-2"></div>')}
                `;

                btn.onclick = () => {
                    selectedDate = i;
                    renderDateSlider(); 
                };

                container.appendChild(btn);
            }

            loadScheduleDetails(selectedDate);

            // Auto Scroll
            setTimeout(() => {
                const activeEl = document.getElementById('activeDay');
                if (activeEl) {
                    activeEl.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
                }
            }, 50);
        }

        function loadScheduleDetails(date) {
            const dateObj = new Date(currYear, currMonth, date);
            const dayNamesIndo = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
            const dayNamesEng = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            
            const dayIndex = dateObj.getDay();
            const dateKey = `${date}-${currMonth + 1}-${currYear}`;
            const holidayInfo = nationalHolidays[dateKey];

            document.getElementById('selectedDayTitle').textContent = `Jadwal ${dayNamesIndo[dayIndex]}`;
            document.getElementById('selectedDayDate').textContent = dateObj.toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });

            const badge = document.getElementById('holidayBadge');
            const holidayText = document.getElementById('holidayName');
            
            if (holidayInfo) {
                badge.classList.remove('hidden');
                holidayText.textContent = holidayInfo;
                holidayText.classList.remove('hidden');
                renderEmptyState("Libur Nasional", holidayInfo);
                return; 
            } else {
                badge.classList.add('hidden');
                holidayText.classList.add('hidden');
            }

            const schedule = scheduleData[dayNamesEng[dayIndex]] || [];
            
            if (schedule.length > 0) {
                renderTimeline(schedule);
            } else {
                renderEmptyState("Tidak Ada Kelas", "Tidak ada jadwal sekolah untuk hari ini.");
            }
        }

        // --- UPDATE PENTING DI BAGIAN RENDER TIMELINE ---
        function renderTimeline(schedule) {
            const container = document.getElementById('scheduleContainer');
            const emptyState = document.getElementById('emptyState');
            
            container.style.display = 'grid';
            emptyState.classList.add('hidden');
            container.innerHTML = ''; 

            schedule.forEach((item, index) => {
                const timeDiv = document.createElement('div');
                timeDiv.className = `flex flex-col items-end pr-5 py-2`;
                timeDiv.innerHTML = `<span class="text-xs font-bold text-gray-600">${item.time}</span>`;
                
                // Card Jadwal
                const cardDiv = document.createElement('div');
                
                // Base Classes
                let cardClasses = `schedule-card bg-gradient-to-br from-${item.color}-50 to-${item.color}-100/50 p-3 rounded-2xl border border-${item.color}-200/60 flex items-center gap-3 mb-3 shadow-sm hover:shadow-md animate-fade-in relative overflow-hidden group`;
                
                // Logic: Jika ada gambar, tambahkan cursor pointer & ripple effect visual
                if (item.image) {
                    cardClasses += ` cursor-pointer`;
                    // Event Listener untuk Buka Foto
                    cardDiv.onclick = () => openPhotoModal(item);
                } else {
                    cardClasses += ` cursor-default`;
                }

                cardDiv.className = cardClasses;
                
                // Indikator Foto (Icon Camera kecil jika ada foto)
                const photoIndicator = item.image ? 
                    `<div class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-white/80 p-1 rounded-full text-${item.color}-600">
                        <i data-lucide="camera" class="w-3 h-3"></i>
                     </div>` : '';

                cardDiv.innerHTML = `
                    <div class="w-10 h-10 bg-white rounded-xl flex items-center justify-center text-${item.color}-500 shadow-sm shrink-0">
                        <i data-lucide="${item.icon}" class="w-5 h-5"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <h3 class="font-bold text-gray-800 text-sm truncate">${item.title}</h3>
                        ${item.room ? `<p class="text-[10px] text-gray-600">${item.room} â€¢ ${item.teacher}</p>` : ''}
                    </div>
                    ${photoIndicator}
                    ${item.image ? `<i data-lucide="chevron-right" class="w-4 h-4 text-${item.color}-400 opacity-50"></i>` : ''}
                `;
                
                container.appendChild(timeDiv);
                container.appendChild(cardDiv);
            });
            lucide.createIcons();
        }

        // ==========================================
        // 3. PHOTO MODAL LOGIC (Fitur Baru)
        // ==========================================
        function openPhotoModal(item) {
            if (!item.image) return; // Jangan buka jika tidak ada gambar

            const modal = document.getElementById('photoModal');
            const img = document.getElementById('photoModalImg');
            const title = document.getElementById('photoModalTitle');
            const time = document.getElementById('photoModalTime');
            const teacher = document.getElementById('photoModalTeacher');

            // Set Content
            img.src = item.image;
            title.textContent = item.title;
            time.textContent = item.time;
            teacher.textContent = item.teacher || "Staff";

            // Show Modal
            modal.classList.remove('hidden');
        }

        function closePhotoModal() {
            const modal = document.getElementById('photoModal');
            modal.classList.add('hidden');
        }

        // ==========================================
        // 4. UTILITIES
        // ==========================================
        function renderEmptyState(title, desc) {
            const container = document.getElementById('scheduleContainer');
            const emptyState = document.getElementById('emptyState');
            container.style.display = 'none';
            emptyState.classList.remove('hidden');
            document.getElementById('emptyTitle').textContent = title;
            document.getElementById('emptyDesc').textContent = desc;
        }

        function changeMonth(dir) {
            currMonth += dir;
            if (currMonth > 11) { currMonth = 0; currYear++; }
            else if (currMonth < 0) { currMonth = 11; currYear--; }
            selectedDate = 1; 
            renderMonthInfo();
            renderDateSlider();
        }

        function renderNotifications() {
            const listContainer = document.getElementById('notificationList');
            const badge = document.getElementById('notifBadge');
            const countLabel = document.getElementById('notifCountLabel');
            
            listContainer.innerHTML = '';
            const unreadCount = notifications.filter(n => !n.read).length;

            if (unreadCount > 0) {
                badge.classList.remove('hidden');
                countLabel.classList.remove('hidden');
                countLabel.textContent = unreadCount + ' Baru';
            } else {
                badge.classList.add('hidden');
                countLabel.classList.add('hidden');
            }

            if (notifications.length === 0) {
                listContainer.innerHTML = `<div class="text-center py-10 opacity-50"><p class="text-sm">Tidak ada notifikasi</p></div>`;
                return;
            }

            notifications.forEach(item => {
                let iconName = item.type === 'alert' ? 'alert-circle' : (item.type === 'success' ? 'check-circle-2' : 'info');
                let colorClass = item.type === 'alert' ? 'orange' : (item.type === 'success' ? 'green' : 'blue');

                const div = document.createElement('div');
                div.className = `p-3 rounded-2xl border cursor-pointer ${item.read ? 'bg-white opacity-70' : 'bg-white border-l-4 border-l-cyan-400'}`;
                div.onclick = () => markAsRead(item.id);
                div.innerHTML = `
                    <div class="flex gap-3">
                        <div class="w-8 h-8 rounded-full bg-${colorClass}-50 flex items-center justify-center text-${colorClass}-500"><i data-lucide="${iconName}" class="w-4 h-4"></i></div>
                        <div>
                            <h4 class="text-sm font-bold text-gray-800">${item.title}</h4>
                            <p class="text-xs text-gray-500 line-clamp-2">${item.message}</p>
                        </div>
                    </div>`;
                listContainer.appendChild(div);
            });
            lucide.createIcons();
        }

        function toggleNotifications() {
            document.getElementById('notificationPanel').classList.toggle('hidden');
            renderNotifications();
        }

        function markAsRead(id) {
            const notif = notifications.find(n => n.id === id);
            if (notif) { notif.read = true; renderNotifications(); }
        }

        function markAllRead() {
            notifications.forEach(n => n.read = true);
            renderNotifications();
        }

        function clearAllNotifications() {
            if(confirm("Hapus semua?")) { notifications = []; renderNotifications(); }
        }

        function goBack() { window.history.back(); }

        window.onload = init;
    </script>
</body>
</html>